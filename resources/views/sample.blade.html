<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/datepicker.min.js"></script>
    <script src="https://unpkg.com/flowbite@2.5.1/dist/flowbite.min.js"></script>

</head>

<body>
<div class="w-full max-w-sm mx-auto bg-transparent p-6 flex flex-col items-center space-y-4 font-sans">
  <!-- Gauge Container -->
  <div id="gauge" class="relative w-56 h-28 flex items-center justify-center">
    <svg viewBox="0 0 200 100" class="w-full h-full">
      <!-- Segments -->
      <g id="segments"></g>
    </svg>
    <div class="absolute bottom-0 flex flex-col items-center translate-y-6">
      <span id="percentage" class="text-3xl font-semibold text-[#081032] dark:text-gray-100">0%</span>
      <span class="text-sm text-[#A4A4A4] dark:text-gray-400">Attendance Rate</span>
    </div>
  </div>

  <!-- Progress Details -->
  <div class="w-full space-y-2">
    <div>
      <div class="flex justify-between text-sm text-[#081032] dark:text-gray-300">
        <span>Present</span><span>10/50</span>
      </div>
      <div class="w-full bg-gray-200 rounded-full h-2.5">
        <div class="bg-blue-500 h-2.5 rounded-full" style="width: 20%;"></div>
      </div>
    </div>

    <div>
      <div class="flex justify-between text-sm text-[#081032] dark:text-gray-300">
        <span>Expected Workforce</span><span>50</span>
      </div>
      <div class="w-full bg-gray-200 rounded-full h-2.5">
        <div class="bg-blue-900 h-2.5 rounded-full" style="width: 100%;"></div>
      </div>
    </div>

    <div>
      <div class="flex justify-between text-sm text-[#081032] dark:text-gray-300">
        <span>Absent</span><span>40/50</span>
      </div>
      <div class="w-full bg-gray-200 rounded-full h-2.5">
        <div class="bg-blue-400 h-2.5 rounded-full" style="width: 80%;"></div>
      </div>
    </div>
  </div>
</div>

</body>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const totalSegments = 20; // number of blocks
  const gauge = document.getElementById("segments");
  const percentageText = document.getElementById("percentage");
  const attendanceRate = 70.8; // Change this dynamically if needed

  // Create segments (half circle)
  for (let i = 0; i < totalSegments; i++) {
    const angle = (Math.PI * i) / (totalSegments - 1); // radians
    const x = 100 + 80 * Math.cos(angle - Math.PI); // radius 80
    const y = 100 + 80 * Math.sin(angle - Math.PI);
    const rectWidth = 8, rectHeight = 18;

    const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
    rect.setAttribute("x", x - rectWidth / 2);
    rect.setAttribute("y", y - rectHeight / 2);
    rect.setAttribute("width", rectWidth);
    rect.setAttribute("height", rectHeight);
    rect.setAttribute("rx", 3);
    rect.setAttribute("ry", 3);
    rect.setAttribute("fill", "#E5E7EB");
    rect.setAttribute("transform", `rotate(${(angle * 180) / Math.PI - 90}, ${x}, ${y})`);
    gauge.appendChild(rect);
  }

  // Animate fill
  const fillSegments = Math.round((attendanceRate / 100) * totalSegments);
  let current = 0;

  const interval = setInterval(() => {
    if (current < fillSegments) {
      const rect = gauge.children[current];
      const colorStep = 400 + (current / totalSegments) * 400; // lighter to darker blue
      rect.setAttribute("fill", `hsl(217, 91%, ${65 - (current * 25) / totalSegments}%)`);
      current++;
    } else {
      clearInterval(interval);
    }

    const displayedPercent = Math.min((current / totalSegments) * 100, attendanceRate).toFixed(1);
    percentageText.textContent = `${displayedPercent}%`;
  }, 100);
});
</script>

</html>